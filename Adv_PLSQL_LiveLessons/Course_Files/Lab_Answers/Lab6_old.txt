
CREATE OR REPLACE TRIGGER CHG_EMP_DEPT
   INSTEAD OF UPDATE OR DELETE ON EMP_DEPT_VW
   FOR EACH ROW
BEGIN
    IF UPDATING THEN
      UPDATE EMP
         SET DEPTNO = (select DEPTNO from DEPT
                       where LOC = :NEW.LOC)
         WHERE ENAME = :OLD.ENAME;
    ELSIF DELETING THEN
      DELETE FROM DEPT
         WHERE LOC = :OLD.LOC;
    END IF;

END;
/

CREATE OR REPLACE TRIGGER Update_EMP_DEPT
   INSTEAD OF UPDATE ON EMP_DEPT_VW
   FOR EACH ROW
BEGIN
    UPDATE EMP
      SET ENAME = :NEW.ENAME,
          DEPTNO = (select deptno from dept
                    where LOC = :NEW.LOC)
      WHERE ENAME = :OLD.ENAME;

END;
/

CREATE OR REPLACE TRIGGER Delete_EMP_DEPT
   INSTEAD OF DELETE ON EMP_DEPT_VW
   FOR EACH ROW
BEGIN
    DELETE FROM DEPT
    WHERE LOC = :OLD.LOC;

END;
/


